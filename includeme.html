

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ckanext-realtime &mdash; ckanext-realtime 0.3.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="ckanext-realtime 0.3.2 documentation" href="index.html"/>
        <link rel="prev" title="Welcome to ckanext-realtime’s documentation!" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> ckanext-realtime</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">ckanext-realtime</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#copying-and-license">Copying and License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#quick-start-guide">Quick Start Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-s-in-the-project">What&#8217;s in the project?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#environment">Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#try">Try</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-python-tests">Running Python Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-jasmine-specs">Running Jasmine Specs</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">ckanext-realtime</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>ckanext-realtime</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/includeme.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <a class="reference external image-reference" href="https://travis-ci.org/alexandrainst/ckanext-realtime"><img alt="https://travis-ci.org/alexandrainst/ckanext-realtime.png?branch=master" src="https://travis-ci.org/alexandrainst/ckanext-realtime.png?branch=master" /></a>
<a class="reference external image-reference" href="https://coveralls.io/r/alexandrainst/ckanext-realtime"><img alt="https://coveralls.io/repos/alexandrainst/ckanext-realtime/badge.png" src="https://coveralls.io/repos/alexandrainst/ckanext-realtime/badge.png" /></a>
<div class="section" id="ckanext-realtime">
<h1>ckanext-realtime<a class="headerlink" href="#ckanext-realtime" title="Permalink to this headline">¶</a></h1>
<p><strong>ckanext-realtime</strong> is CKAN plugin which makes your CKAN site into a <strong>Realtime Data Portal</strong>. By using <strong>CkanRT.js</strong> library, client applications
can subscribe to realtime events from <em>Observable Datastores</em>.</p>
<p>For more info read the <a class="reference external" href="http://alexandrainst.github.io/ckanext-realtime/">docs</a>. Feel free to submit your ideas and pull requests if you would like to contribute.</p>
<div class="section" id="copying-and-license">
<h2>Copying and License<a class="headerlink" href="#copying-and-license" title="Permalink to this headline">¶</a></h2>
<p>This material is copyright (c) 2014 <a class="reference external" href="http://www.alexandra.dk/uk/pages/default.aspx">Alexandra Instituttet A/S</a> and <a class="reference external" href="http://www.gatesense.com">Gatesense</a>.</p>
<p>It is open and licensed under the GNU Affero General Public License (AGPL) v3.0
whose full text may be found at:</p>
<p><a class="reference external" href="http://www.fsf.org/licensing/licenses/agpl-3.0.html">http://www.fsf.org/licensing/licenses/agpl-3.0.html</a></p>
</div>
</div>
<div class="section" id="quick-start-guide">
<h1>Quick Start Guide<a class="headerlink" href="#quick-start-guide" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-s-in-the-project">
<h2>What&#8217;s in the project?<a class="headerlink" href="#what-s-in-the-project" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>CKAN extension which enables observable datastores</li>
<li>Datastore listener script (bin/datastore_listener)</li>
<li>WebSocket server (bin/ckan_wss)</li>
<li>JavaScript library for communication with the realtime CKAN (client/CkanRT.js)</li>
</ol>
</div>
<div class="section" id="environment">
<h2>Environment<a class="headerlink" href="#environment" title="Permalink to this headline">¶</a></h2>
<p>The project has been tested on <strong>Arch Linux</strong> and <strong>Ubuntu 12.04</strong> servers. That Said, you will need:</p>
<ol class="arabic simple">
<li>Redis Server</li>
<li>CKAN (tested on 2.2 but it should work with earlier minor releases as well).</li>
<li>ckanext-datastore plugin enabled</li>
</ol>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Install the plugin</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>$ python setup.py develop</em></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Install the requirements</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>$ pip install -r requirements.txt</em></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Set ckanext-realtime specific configuration options in your ckan config (e.g. /etc/ckan/default/production.ini):</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em># ckanext-realtime settings</em></div>
<div class="line"><br /></div>
<div class="line"><em>#at what url can the Action API be reached</em></div>
<div class="line"><em>ckan.realtime.ckan_api_url = http://localhost:5000/api/3/action/</em></div>
<div class="line"><br /></div>
<div class="line"><em># admin API key to be used by WebSocket server and datastore listener</em></div>
<div class="line"><em>ckan.realtime.apikey = &lt;api key&gt;</em></div>
<div class="line"><br /></div>
<div class="line"><em>#redis server host</em></div>
<div class="line"><em>ckan.realtime.redis_host = 127.0.0.1</em></div>
<div class="line"><br /></div>
<div class="line"><em>#redis server port</em></div>
<div class="line"><em>ckan.realtime.redis_port = 6379</em></div>
<div class="line"><br /></div>
<div class="line"><em>#WebsocketServer port</em></div>
<div class="line"><em>ckan.realtime.wss_port = 9000</em></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Enable the plugin in the CKAN configuration file:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em># datastore plugin is a requirement for the realtime plugin</em></div>
<div class="line"><em>ckan.plugin = ... datastore realtime</em></div>
</div>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="try">
<h2>Try<a class="headerlink" href="#try" title="Permalink to this headline">¶</a></h2>
<p>After installing and configuring the plugin, start up CKAN and Redis.
Then start the Datastore Listener script so that it can
notify you about changes to Observable Datastores using PostgreSQL LISTEN/NOTIFY feature:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>$ python bin/datastore_listener /etc/ckan/default/development.ini</em></div>
</div>
</div></blockquote>
<p>Lastly, start the WebSocket server:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>$ python bin/ckan_wss /etc/ckan/default/development.ini</em></div>
</div>
</div></blockquote>
<p>Now you are ready to run the client examples found in client/examples folder of the project.</p>
</div>
<div class="section" id="running-python-tests">
<h2>Running Python Tests<a class="headerlink" href="#running-python-tests" title="Permalink to this headline">¶</a></h2>
<p>Copy test.ini.example to test.ini and add your specific test settings.
In order to run python tests, you have to start solr server and run this command:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>$ nosetests</em></div>
</div>
</div></blockquote>
</div>
<div class="section" id="running-jasmine-specs">
<h2>Running Jasmine Specs<a class="headerlink" href="#running-jasmine-specs" title="Permalink to this headline">¶</a></h2>
<p>First, install jasmine test runner gem:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>$ gem install jasmine</em></div>
</div>
</div></blockquote>
<p>Start the WebSocket server in the test mode:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>$ python bin/ckan_wss &lt;path_to_ckan_config&gt; - -test</em></div>
</div>
</div></blockquote>
<p>Start the jasmine test runner:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>$ rake jasmine</em></div>
</div>
</div></blockquote>
<p>And run the tests in  your browser by navigating to <em>localhost:8888</em> in your browser. Alternatively, execute the tests directly in your shell:</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>$ rake jasmine:ci</em></div>
</div>
</div></blockquote>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral" title="Welcome to ckanext-realtime’s documentation!"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Alexandra Institute and Gatesense.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.3.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>